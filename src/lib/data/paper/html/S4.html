<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation</title>
<!--Generated by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->

<link rel="stylesheet" href="LaTeXML.css" type="text/css">
<link rel="stylesheet" href="ltx-article.css" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js?config=MML_HTMLorMML"></script>
<link rel="up" href="paper.html" title="LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="start" href="paper.html" title="LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="prev" href="S3.html" title="III Controlled Experiment ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="next" href="S5.html" title="V Analysis and Interpretation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S1.html" title="I Introduction ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S2.html" title="II Related Work ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S3.html" title="III Controlled Experiment ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S5.html" title="V Analysis and Interpretation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S6.html" title="VI Discussion ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S7.html" title="VII Conclusion ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="section" href="S8.html" title="VIII Future Work ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
<link rel="bibliography" href="bib.html" title="References ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation">
</head>
<body>
<nav class="ltx_page_navbar"><a href="paper.html" title="" class="ltx_ref" rel="start"><span class="ltx_text ltx_ref_title">LLM4DS: Evaluating Large Language Models for Data Science Code Generation</span></a>
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a href="S1.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">I </span><span class="ltx_text ltx_font_smallcaps">Introduction</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S2.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">II </span><span class="ltx_text ltx_font_smallcaps">Related Work</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S3.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">III </span><span class="ltx_text ltx_font_smallcaps">Controlled Experiment</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section ltx_ref_self">
<span class="ltx_ref ltx_ref_self"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV </span><span class="ltx_text ltx_font_smallcaps">Experiment Operation</span></span></span>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#SS1" title="In IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV-A </span><span class="ltx_text ltx_font_italic">Dataset: Selection of Data Science Problems</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#SS2" title="In IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV-B </span><span class="ltx_text ltx_font_italic">Prompt Engineering: Transforming Problems into Prompts</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#SS3" title="In IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV-C </span><span class="ltx_text ltx_font_italic">Code Generation and Execution</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S5.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">V </span><span class="ltx_text ltx_font_smallcaps">Analysis and Interpretation</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S6.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">VI </span><span class="ltx_text ltx_font_smallcaps">Discussion</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S7.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">VII </span><span class="ltx_text ltx_font_smallcaps">Conclusion</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="S8.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">VIII </span><span class="ltx_text ltx_font_smallcaps">Future Work</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_bibliography"><a href="bib.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_title">References</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<header class="ltx_page_header">
<div class="ltx_align_center">
<a href="paper.html" title="" class="ltx_ref" rel="up"><span class="ltx_text ltx_ref_title">LLM4DS: Evaluating Large Language Models for Data Science Code Generation</span></a><a href="S3.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">III </span><span class="ltx_text ltx_font_smallcaps">Controlled Experiment</span></span></a><a href="S5.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">V </span><span class="ltx_text ltx_font_smallcaps">Analysis and Interpretation</span></span></a>
</div></header>
<div class="ltx_page_content">
<section class="ltx_section ltx_authors_1line">
<h1 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span class="ltx_text ltx_font_smallcaps">Experiment Operation</span>
</h1>

<div id="p1" class="ltx_para">
<p class="ltx_p">The experiment was conducted over the span of two months. For each of the four LLMs, we generated a solution for each of the 100 selected problems, resulting in a total of 400 generated coding solutions. Two researchers manually interacted with the AI assistants by inputting the prompts into their respective interfaces. They then copied the generated code and submitted it to the Stratascratch platform to assess its correctness and functionality. The researchers recorded whether the solution worked as intended and noted any necessary adjustments. Since Stratascratch provides execution time only for Analytical questions and similarity scores for Visualization questions, we collected these specific measurements accordingly.</p>
</div>
<div id="p2" class="ltx_para">
<p class="ltx_p">The overall process of our controlled experiment consists of 11 steps, as illustrated in Figure <a href="#F1" title="Figure 1 ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>:</p>
</div>
<div id="p3" class="ltx_para">
<ol id="I1" class="ltx_enumerate">
<li id="I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="I1.i1.p1" class="ltx_para">
<p class="ltx_p">Select the problem source: We chose Stratascratch <cite class="ltx_cite ltx_citemacro_cite">[<a href="bib.html#bib70" title="Master coding for data science" class="ltx_ref">18</a>]</cite> as the platform for sourcing data science problems.</p>
</div>
</li>
<li id="I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="I1.i2.p1" class="ltx_para">
<p class="ltx_p">Select one problem per task category for prompt engineering: One problem from each data science task category (Analytical, Algorithm, Visualization) was selected to refine our prompt templates.</p>
</div>
</li>
<li id="I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="I1.i3.p1" class="ltx_para">
<p class="ltx_p">Prompt Engineering with feedback loop: We performed prompt engineering by iteratively adjusting the prompts and assessing the performance of different LLM versions, creating optimal prompt structures for each task type.</p>
</div>
</li>
<li id="I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="I1.i4.p1" class="ltx_para">
<p class="ltx_p">Selection of AI assistants and LLMs: Four AI assistants, each utilizing a different LLM, were selected for the experiment.</p>
</div>
</li>
<li id="I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="I1.i5.p1" class="ltx_para">
<p class="ltx_p">Definition of final prompts: The finalized prompt templates were established for each problem type based on the prompt engineering process.</p>
</div>
</li>
<li id="I1.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">6.</span> 
<div id="I1.i6.p1" class="ltx_para">
<p class="ltx_p">Selection of 100 Data Science problems: We selected 100 data science problems covering various topics across the three task types to ensure a comprehensive evaluation.</p>
</div>
</li>
<li id="I1.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">7.</span> 
<div id="I1.i7.p1" class="ltx_para">
<p class="ltx_p">Creation of prompts: The selected problems were incorporated into the prompt templates, resulting in 100 tailored prompts.</p>
</div>
</li>
<li id="I1.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">8.</span> 
<div id="I1.i8.p1" class="ltx_para">
<p class="ltx_p">Execution with AI assistants: Each prompt was executed using the four AI assistants, and the generated Python code was saved.</p>
</div>
</li>
<li id="I1.i9" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">9.</span> 
<div id="I1.i9.p1" class="ltx_para">
<p class="ltx_p">Submission to Stratascratch platform: The generated code solutions were submitted to the Stratascratch platform interface for evaluation.</p>
</div>
</li>
<li id="I1.i10" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">10.</span> 
<div id="I1.i10.p1" class="ltx_para">
<p class="ltx_p">Execution and result collection: The code was executed on Stratascratch, and the results were saved into a results dataset.</p>
</div>
</li>
<li id="I1.i11" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">11.</span> 
<div id="I1.i11.p1" class="ltx_para">
<p class="ltx_p">Data analysis: We compared the performance results of the four LLMs to analyze their effectiveness.</p>
</div>
</li>
</ol>
</div>
<figure id="F1" class="ltx_figure"><img src="x1.png" id="F1.g1" class="ltx_graphics ltx_centering ltx_img_portrait" width="747" height="1361" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Overview of the Experimental Process.</figcaption>
</figure>
<div id="p4" class="ltx_para">
<p class="ltx_p">The following subsections and sections provide more detailed explanations of the main steps:</p>
<ul id="I2" class="ltx_itemize">
<li id="I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I2.i1.p1" class="ltx_para">
<p class="ltx_p">Subsection <a href="#SS1" title="IV-A Dataset: Selection of Data Science Problems ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV-A</span></a> describes the selection of 100 Python coding problems from Stratascratch, categorized by difficulty levels (easy, medium, hard) and types (Analytical, Algorithm, Visualization).</p>
</div>
</li>
<li id="I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I2.i2.p1" class="ltx_para">
<p class="ltx_p">Subsection <a href="#SS2" title="IV-B Prompt Engineering: Transforming Problems into Prompts ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV-B</span></a> outlines the iterative prompt engineering process, including the development and refinement of prompt templates for each task type. This resulted in optimal prompt structures used to transform the selected problems into 100 tailored prompts.</p>
</div>
</li>
<li id="I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I2.i3.p1" class="ltx_para">
<p class="ltx_p">Subsection <a href="#SS3" title="IV-C Code Generation and Execution ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV-C</span></a> explains the process of using these prompts with each AI assistant to generate code solutions.</p>
</div>
</li>
<li id="I2.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I2.i4.p1" class="ltx_para">
<p class="ltx_p">Section <a href="S5.html" title="V Analysis and Interpretation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">V</span></a> covers the data analysis process.</p>
</div>
</li>
</ul>
</div>
<section id="SS1" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">IV-A </span><span class="ltx_text ltx_font_italic">Dataset: Selection of Data Science Problems</span>
</h2>

<div id="SS1.p1" class="ltx_para">
<p class="ltx_p">For our study, we selected the Stratascratch <cite class="ltx_cite ltx_citemacro_cite">[<a href="bib.html#bib70" title="Master coding for data science" class="ltx_ref">18</a>]</cite> platform as the source of data science coding problems. Stratascratch is a platform that aggregates real-world data science interview questions from various companies, providing a diverse set of problems that are representative of typical tasks encountered in data science, such as data manipulation, algorithm development, and data visualization.</p>
</div>
<div id="SS1.p2" class="ltx_para">
<p class="ltx_p">Stratascratch problems are organized into three difficulty levels (easy, medium, and hard) and three main types, each addressing unique aspects of data science problem-solving:</p>
</div>
<div id="SS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Analytical:</span> These problems involve tasks requiring data analysis and manipulation using tools like <span class="ltx_text ltx_font_typewriter">pandas</span> and SQL. Topics include data aggregation, filtering, conditional expressions, and data formatting.</p>
</div>
<div id="SS1.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Algorithm:</span> These challenges focus on computational problem-solving and algorithm development. Topics in this category include array manipulation, linear regression, probability, graph theory, recursion, and optimization techniques.</p>
</div>
<div id="SS1.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold">Visualization:</span> These problems require the creation of charts and graphs to represent data insights visually. Topics cover distribution analysis, time-series trend analysis, spatial data visualization, and comparison of categorical and numerical data.</p>
</div>
<div id="SS1.p6" class="ltx_para">
<p class="ltx_p">An example Stratascratch problem is shown in Figure <a href="#F2" title="Figure 2 ‣ IV-A Dataset: Selection of Data Science Problems ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, demonstrating the typical interface and information available for each question.</p>
</div>
<figure id="F2" class="ltx_figure">
<p class="ltx_p ltx_align_center"><span class="ltx_text ltx_framed ltx_framed_rectangle" style="border-color: #000000;"><img src="x2.png" id="F2.g1" class="ltx_graphics ltx_img_landscape" width="568" height="361" alt="Refer to caption"></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Example of a Visualization Problem from the Stratascratch platform.</figcaption>
</figure>
<div id="SS1.p7" class="ltx_para">
<p class="ltx_p">To build our dataset, we used random sampling while ensuring balanced representation across problem types and difficulty levels—selecting 100 Python coding problems in total, with 35 Analytical, 35 Algorithm, and 30 Visualization problems. From these 100 questions, 34 are easy, 32 are medium, and 34 are hard.
To avoid infringing any intellectual property from Stratascratch, we omitted the full problem descriptions from our dataset. However, we have provided a table containing problem IDs, difficulty levels, links, and topic descriptions, which gives sufficient context for each task (dataset available in <cite class="ltx_cite ltx_citemacro_cite">[<a href="bib.html#bib76" title="LLM4DS-Benchmark: A Dataset for Assessing LLM Performance in Data Science Coding Tasks" class="ltx_ref">2</a>]</cite>).</p>
</div>
</section>
<section id="SS2" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">IV-B </span><span class="ltx_text ltx_font_italic">Prompt Engineering: Transforming Problems into Prompts</span>
</h2>

<div id="SS2.p1" class="ltx_para">
<span class="ltx_ERROR undefined">{tcolorbox}</span>
<p class="ltx_p">[title=Prompt Template for Visualization Problems, colback=white, colframe=black]
<span class="ltx_text" style="font-size:70%;">Act as a data scientist and provide working Python3 code for the problem below.</span></p>
</div>
<div id="SS2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">CRITICAL REQUIREMENTS:<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p3" class="ltx_para">
<ol id="I3" class="ltx_enumerate">
<li id="I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="I3.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Use </span><span class="ltx_text ltx_font_bold" style="font-size:70%;">ONLY</span><span class="ltx_text" style="font-size:70%;"> the exact prefilled code snippet as starting point.</span></p>
</div>
</li>
<li id="I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="I3.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">NO</span><span class="ltx_text" style="font-size:70%;"> additional imports beyond what’s given.</span></p>
</div>
</li>
<li id="I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="I3.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">NO</span><span class="ltx_text" style="font-size:70%;"> sample/test data creation—use </span><span class="ltx_text ltx_font_bold" style="font-size:70%;">ONLY</span><span class="ltx_text" style="font-size:70%;"> the provided DataFrame.</span></p>
</div>
</li>
<li id="I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="I3.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">NO</span><span class="ltx_text" style="font-size:70%;"> functions unless explicitly required in the original code.</span></p>
</div>
</li>
<li id="I3.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="I3.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Code must end with appropriate visualization command (</span><span class="ltx_text ltx_font_typewriter" style="font-size:70%;">plt.show()</span><span class="ltx_text" style="font-size:70%;"> for Matplotlib, </span><span class="ltx_text ltx_font_typewriter" style="font-size:70%;">fig.show()</span><span class="ltx_text" style="font-size:70%;"> for Plotly, etc.).</span></p>
</div>
</li>
<li id="I3.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">6.</span> 
<div id="I3.i6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Code must be fully runnable without any modifications.</span></p>
</div>
</li>
</ol>
</div>
<div id="SS2.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">PROBLEM:<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Title: <span class="ltx_text ltx_font_bold">{<span class="ltx_text ltx_font_typewriter">Title</span>}</span></span></p>
</div>
<div id="SS2.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Description: <span class="ltx_text ltx_font_bold">{<span class="ltx_text ltx_font_typewriter">Description</span>}</span></span></p>
</div>
<div id="SS2.p7" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Difficulty: <span class="ltx_text ltx_font_bold">{<span class="ltx_text ltx_font_typewriter">Level</span>}</span></span></p>
</div>
<div id="SS2.p8" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">{<span class="ltx_text ltx_font_typewriter">DataFrame</span>}<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p9" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">{<span class="ltx_text ltx_font_typewriter">Additional</span>}<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p10" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">EXPECTED OUTPUT FORMAT:<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p11" class="ltx_para">
<ul id="I4" class="ltx_itemize">
<li id="I4.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Direct plotting code only.</span></p>
</div>
</li>
<li id="I4.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">Must end with appropriate </span><span class="ltx_text ltx_font_typewriter" style="font-size:70%;">show()</span><span class="ltx_text" style="font-size:70%;"> command.</span></p>
</div>
</li>
<li id="I4.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">No </span><span class="ltx_text ltx_font_typewriter" style="font-size:70%;">return</span><span class="ltx_text" style="font-size:70%;"> statements.</span></p>
</div>
</li>
<li id="I4.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">No </span><span class="ltx_text ltx_font_typewriter" style="font-size:70%;">print</span><span class="ltx_text" style="font-size:70%;"> statements.</span></p>
</div>
</li>
<li id="I4.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">No functions unless explicitly required.</span></p>
</div>
</li>
<li id="I4.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="I4.i6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text" style="font-size:70%;">No test data creation.</span></p>
</div>
</li>
</ul>
</div>
<div id="SS2.p12" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">Prefilled code snippet (use exactly):<span class="ltx_text ltx_font_medium"></span></span></p>
</div>
<div id="SS2.p13" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold" style="font-size:70%;">{<span class="ltx_text ltx_font_typewriter">Code</span>}<span class="ltx_text ltx_font_medium">
</span></span></p>
</div>
<div id="SS2.p14" class="ltx_para">
<p class="ltx_p">This step started by selecting one problem from each task category-Analytical, Algorithm, and Visualization-for prompt development. These problems were outside our main dataset to avoid biasing the evaluation results. During this phase, we experimented with various prompt structures and observed the models’ outputs. Initially, the models often generated code that included datasets or functions not specified in the problem descriptions. To address this, we iteratively refined the prompts by introducing specific instructions and constraints.</p>
</div>
<div id="SS2.p15" class="ltx_para">
<p class="ltx_p">We tested several LLMs during prompt engineering, including some not selected for the main experiment. Some LLMs, such as Gemini (1.5 Flash), could not produce functional code even for easy problems, despite multiple prompt refinements. Others, like YouChat Pro, was capable but was not included in the final selection to avoid redundancy.</p>
</div>
<div id="SS2.p16" class="ltx_para">
<p class="ltx_p">To ensure consistency and minimize subjectivity, we automated the conversion of problem descriptions into prompts. This involved creating prompt templates tailored to each problem type-Analytical, Algorithm, and Visualization-which addressed the unique requirements of each category. This section illustrates the prompt template used for Visualization problems. The templates for Algorithm and Analytics tasks are available in <cite class="ltx_cite ltx_citemacro_cite">[<a href="bib.html#bib76" title="LLM4DS-Benchmark: A Dataset for Assessing LLM Performance in Data Science Coding Tasks" class="ltx_ref">2</a>]</cite>. Our automated prompt generation system parsed the problem descriptions and inserted the information into the appropriate template based on the problem type.</p>
</div>
</section>
<section id="SS3" class="ltx_subsection">
<h2 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">IV-C </span><span class="ltx_text ltx_font_italic">Code Generation and Execution</span>
</h2>

<div id="SS3.p1" class="ltx_para">
<p class="ltx_p">In this experiment, we presented 100 problem prompts to four AI assistants—Microsoft Copilot, ChatGPT, Claude, and Perplexity Labs—generating a total of 400 code solutions (100 problems per assistant). For each problem, a new chat thread was initiated with the AI assistant to ensure no influence from previous interactions. Each AI assistant was given up to three attempts per problem, guided by feedback such as “Not worked” (which yielded better results with ChatGPT and Copilot) or “Wrong answer” (more effective with Claude and Perplexity) to prompt improvements.</p>
</div>
<div id="SS3.p2" class="ltx_para">
<p class="ltx_p">To evaluate the solutions, we executed them on the Stratascratch platform and recorded the metrics provided by the platform, depending on the type of problem. For visualization problems, for example, the platforms calculates the similarity of the generated graphs with the expected outputs. Figure <a href="#F3" title="Figure 3 ‣ IV-C Code Generation and Execution ‣ IV Experiment Operation ‣ LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> illustrates a similarity comparison between a graph generated by the Perplexity model and the expected solution provided by Stratascratch.</p>
</div>
<figure id="F3" class="ltx_figure">
<p class="ltx_p ltx_align_center"><span class="ltx_text ltx_framed ltx_framed_rectangle" style="border-color: #000000;"><img src="x3.png" id="F3.g1" class="ltx_graphics ltx_img_portrait" width="538" height="719" alt="Refer to caption"></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Similarity comparison for a Visualization Problem.</figcaption>
</figure>
<div id="SS3.p3" class="ltx_para">
<p class="ltx_p">Due to Stratascratch platform constraints (e.g., limitations on library imports and required code formatting), we allowed minor manual edits to adapt the AI-generated code for consistent evaluation. These adjustments included removing prohibited imports (e.g., import os), modifying code structure (e.g., removing function encapsulation when global code was needed), and eliminating unnecessary print statements in favor of returns. These edits preserved the core logic and functionality of the solutions and were documented for transparency and reproducibility. This documentation (available in <cite class="ltx_cite ltx_citemacro_cite">[<a href="bib.html#bib76" title="LLM4DS-Benchmark: A Dataset for Assessing LLM Performance in Data Science Coding Tasks" class="ltx_ref">2</a>]</cite>) includes the nature of the edits and their reason.</p>
</div>
</section>
</section>
</div>
<footer class="ltx_page_footer">
<div class="ltx_align_center">
<a href="S3.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref" rel="prev"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">III </span><span class="ltx_text ltx_font_smallcaps">Controlled Experiment</span></span></a><a href="bib.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref" rel="bibliography"><span class="ltx_text ltx_ref_title">References</span></a><a href="S5.html" title="In LLM4DS: Evaluating Large Language Models for Data Science Code Generation" class="ltx_ref" rel="next"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">V </span><span class="ltx_text ltx_font_smallcaps">Analysis and Interpretation</span></span></a>
</div>
<div class="ltx_page_logo">Generated  by <a href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>
</body>
</html>
